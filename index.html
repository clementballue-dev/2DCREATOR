<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Mini Shooter</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: #4da6ff;
  }
  #playBtn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 15px 25px;
    font-size: 18px;
    cursor: pointer;
    border: none;
    background: #000;
    color: #fff;
    border-radius: 8px;
  }
</style>
</head>
<body>

<canvas id="game"></canvas>
<button id="playBtn">JOUER</button>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
window.addEventListener("resize", resize);

// --- ETAT DU JEU ---
let playing = false;
let ammo = 10;

// --- JOUEUR ---
const player = {
  x: innerWidth/2,
  y: innerHeight/2,
  size: 40
};

// --- ENNEMI ---
const enemy = {
  x: 100,
  y: 100,
  size: 40
};

// --- BALLES ---
let bullets = [];

// --- DRAW ---
function drawPlayer(){
  ctx.fillStyle = "#222";
  ctx.fillRect(player.x, player.y, player.size, player.size);

  // pistolet
  ctx.fillStyle = "#555";
  ctx.fillRect(player.x + player.size, player.y + player.size/2 - 5, 20, 10);
}

function drawEnemy(){
  ctx.fillStyle = "red";
  ctx.fillRect(enemy.x, enemy.y, enemy.size, enemy.size);
}

function drawBullets(){
  ctx.fillStyle = "yellow";
  bullets.forEach(b => {
    ctx.fillRect(b.x, b.y, 6, 6);
    b.x += 10;
  });
}

// --- TIR ---
window.addEventListener("click", () => {
  if(!playing) return;

  if(ammo > 0){
    bullets.push({
      x: player.x + player.size + 20,
      y: player.y + player.size/2
    });
    ammo--;
  } else {
    ammo = 10; // recharge auto
  }
});

// --- GAME LOOP ---
function gameLoop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(playing){
    drawPlayer();
    drawEnemy();
    drawBullets();
  }

  requestAnimationFrame(gameLoop);
}
gameLoop();

// --- BOUTON JOUER ---
document.getElementById("playBtn").onclick = () => {
  playing = true;
  document.getElementById("playBtn").style.display = "none";
};
</script>

</body>
</html>
